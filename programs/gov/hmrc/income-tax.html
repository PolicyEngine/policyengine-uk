<!doctype html>
<html class="no-js" lang="en">
  <head><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Fuel duty" href="fuel-duty.html" /><link rel="prev" title="National Insurance" href="national-insurance.html" />

    <!-- Generated with Sphinx 6.2.1 and Furo 2022.12.07 -->
        <title>Income Tax - PolicyEngine UK documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">PolicyEngine UK documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">PolicyEngine UK documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Using the model</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/getting-started.html">Getting started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Economic assumptions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../assumptions/growthfactors.html">Economic assumptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../assumptions/water-bills.html">Water bills projection and uprating</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Validation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../validation/hbai.html">HBAI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="child-benefit.html">Child Benefit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dwp/universal-credit.html">Universal Credit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dwp/PIP.html">PIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dwp/pension-credit.html">Pension Credit</a></li>
<li class="toctree-l1"><a class="reference internal" href="national-insurance.html">National Insurance</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Income Tax</a></li>
<li class="toctree-l1"><a class="reference internal" href="fuel-duty.html">Fuel duty</a></li>
<li class="toctree-l1"><a class="reference internal" href="stamp-duty.html">SDLT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contrib/ubi-center/carbon-tax.html">Carbon taxes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ofgem/energy-price-guarantee.html">EPG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dcms/bbc/tv-licence.html">TV Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../revenue_scotland/land-and-buildings-transaction-tax.html">LBTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wra/land-transaction-tax.html">LTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="tax-free-childcare.html">Tax-free childcare</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dfe/extended-childcare-entitlement.html">Extended childcare entitlement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dfe/universal-childcare-entitlement.html">Universal childcare entitlement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dfe/care-to-learn.html">Care to Learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dfe/targeted-childcare-entitlement.html">Targeted childcare entitlement</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="income-tax">
<h1>Income Tax<a class="headerlink" href="#income-tax" title="Permalink to this heading">#</a></h1>
<p>Income tax is a tax levied on the income earned by individuals and businesses. It is one of the primary sources of revenue for the UK government and is used to fund public services and government expenditures.</p>
<ul class="simple">
<li><p>Tax Allowances:
These are specific amounts of income that individuals can earn before they are required to pay income tax. Various types of allowances exist, such as Personal Allowance, Marriage Allowance, Property Allowance, and Dividend Allowance, each offering different benefits and eligibility criteria.</p></li>
<li><p>Tax Charges:
Tax charges arise when an individual’s income exceeds certain thresholds or when specific conditions are met. These charges fluctuate based on income levels and are influenced by additional factors, such as the High-Income Child Benefit Charge.</p></li>
<li><p>Tax Rates:
The government applies different percentages of tax rates based on the income bracket an individual falls into. There are Basic, Higher, and Additional rates, each applicable to respective income ranges. Moreover, specific types of income, like dividends, have their distinct tax rates.</p></li>
<li><p>Tax Reliefs:
To promote certain behaviors or lower the tax burden for specific groups, the government provides tax reliefs. These provisions reduce tax liability for eligible individuals, with examples including reliefs for Pension Contributions, Charitable Donations, and Work-Related Expenses.</p></li>
</ul>
<section id="legislation">
<h2>Legislation<a class="headerlink" href="#legislation" title="Permalink to this heading">#</a></h2>
<p>UK income tax legislation is grounded in primary legislation passed by the UK Parliament, supplemented by secondary legislation and administrative guidance issued by Her Majesty’s Revenue and Customs (HMRC).</p>
<ul class="simple">
<li><p>Income Tax Act 2007 (ITA 2007):
This is a central piece of legislation consolidating various statutes related to income tax in the UK. It comprehensively covers aspects such as the charge to tax, applicable rates, allowances, and reliefs, serving as a foundational reference for income tax matters.</p></li>
<li><p>Taxation of Chargeable Gains Act 1992 (TCGA 1992):
Though primarily focused on capital gains tax, this Act intersects significantly with income tax, particularly in the realm of taxation of gains. It provides detailed regulations on how gains should be taxed and calculated.</p></li>
<li><p>Income Tax (Earnings and Pensions) Act 2003 (ITEPA 2003):
ITEPA 2003 governs the rules related to the taxation of employment income, pension income, and social security income. It outlines the various categories and criteria for taxable earnings and pensions, ensuring a structured approach to taxation in these areas.</p></li>
<li><p>HMRC Manuals and Guidance:
Produced by HMRC, these comprehensive guides aim to help taxpayers in understanding and complying with the complex tax legislation. They provide practical insights and interpretations of the laws, offering clarity and assistance to both individuals and businesses in navigating the income tax landscape.</p></li>
</ul>
</section>
<section id="methodology">
<h2>Methodology:<a class="headerlink" href="#methodology" title="Permalink to this heading">#</a></h2>
<p>Income tax logic can be found in policyengine-uk/policyengine_uk/variables/gov/hmrc/income_tax.</p>
<p>The following table shows a series of income tax simulations using the PolicyEngine UK model.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">policyengine_uk</span><span class="w"> </span><span class="kn">import</span> <span class="n">Simulation</span>


<span class="k">def</span><span class="w"> </span><span class="nf">calculate_taxes</span><span class="p">(</span>
    <span class="n">employment_income</span><span class="p">,</span> <span class="n">dividend_income</span><span class="p">,</span> <span class="n">savings_interest_income</span>
<span class="p">):</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">(</span>
        <span class="n">situation</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;people&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;person&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;employment_income&quot;</span><span class="p">:</span> <span class="n">employment_income</span><span class="p">,</span>
                    <span class="s2">&quot;dividend_income&quot;</span><span class="p">:</span> <span class="n">dividend_income</span><span class="p">,</span>
                    <span class="s2">&quot;savings_interest_income&quot;</span><span class="p">:</span> <span class="n">savings_interest_income</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">income_tax</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="s2">&quot;income_tax&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">dividend_income_tax</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="s2">&quot;dividend_income_tax&quot;</span><span class="p">)[</span>
        <span class="mi">0</span>
    <span class="p">]</span>  <span class="c1"># Added</span>
    <span class="n">savings_income_tax</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="s2">&quot;savings_income_tax&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Added</span>

    <span class="k">return</span> <span class="n">income_tax</span><span class="p">,</span> <span class="n">dividend_income_tax</span><span class="p">,</span> <span class="n">savings_income_tax</span>


<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Person&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Person1&quot;</span><span class="p">,</span> <span class="s2">&quot;Person2&quot;</span><span class="p">,</span> <span class="s2">&quot;Person3&quot;</span><span class="p">,</span> <span class="s2">&quot;Person4&quot;</span><span class="p">,</span> <span class="s2">&quot;Person5&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Employment Income (£)&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">50000</span><span class="p">,</span> <span class="mi">60000</span><span class="p">,</span> <span class="mi">70000</span><span class="p">,</span> <span class="mi">80000</span><span class="p">,</span> <span class="mi">90000</span><span class="p">],</span>
    <span class="s2">&quot;Dividend Income (£)&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">15000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">25000</span><span class="p">,</span> <span class="mi">30000</span><span class="p">],</span>
    <span class="s2">&quot;Savings Interest Income (£)&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">15000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">25000</span><span class="p">],</span>
    <span class="s2">&quot;Income Tax (£)&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;Dividend Income Tax (£)&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;Savings Income Tax (£)&quot;</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">}</span>

<span class="k">for</span> <span class="n">emp_income</span><span class="p">,</span> <span class="n">div_income</span><span class="p">,</span> <span class="n">sav_income</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Employment Income (£)&quot;</span><span class="p">],</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Dividend Income (£)&quot;</span><span class="p">],</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Savings Interest Income (£)&quot;</span><span class="p">],</span>
<span class="p">):</span>
    <span class="n">income_tax</span><span class="p">,</span> <span class="n">div_tax</span><span class="p">,</span> <span class="n">sav_tax</span> <span class="o">=</span> <span class="n">calculate_taxes</span><span class="p">(</span>
        <span class="n">emp_income</span><span class="p">,</span> <span class="n">div_income</span><span class="p">,</span> <span class="n">sav_income</span>
    <span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Income Tax (£)&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">income_tax</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Dividend Income Tax (£)&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">div_tax</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Savings Income Tax (£)&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sav_tax</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Person</th>
      <th>Employment Income (£)</th>
      <th>Dividend Income (£)</th>
      <th>Savings Interest Income (£)</th>
      <th>Income Tax (£)</th>
      <th>Dividend Income Tax (£)</th>
      <th>Savings Income Tax (£)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Person1</td>
      <td>50000</td>
      <td>10000</td>
      <td>5000</td>
      <td>10068.5</td>
      <td>2582.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Person2</td>
      <td>60000</td>
      <td>15000</td>
      <td>10000</td>
      <td>17457.0</td>
      <td>4225.0</td>
      <td>1800.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Person3</td>
      <td>70000</td>
      <td>20000</td>
      <td>15000</td>
      <td>26082.0</td>
      <td>5850.0</td>
      <td>3800.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Person4</td>
      <td>80000</td>
      <td>25000</td>
      <td>20000</td>
      <td>37707.0</td>
      <td>7475.0</td>
      <td>5800.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Person5</td>
      <td>90000</td>
      <td>30000</td>
      <td>25000</td>
      <td>45360.0</td>
      <td>9100.0</td>
      <td>7800.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="appendix">
<h2>Appendix:<a class="headerlink" href="#appendix" title="Permalink to this heading">#</a></h2>
<p>The following tables display the parameter values for income tax allowance.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">policyengine_uk.system</span><span class="w"> </span><span class="kn">import</span> <span class="n">system</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">default</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">annual_allowance</span><span class="o">.</span><span class="n">default</span>
<span class="p">)</span>
<span class="n">minimum</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">annual_allowance</span><span class="o">.</span><span class="n">minimum</span>
<span class="p">)</span>
<span class="n">reduction_rate</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">annual_allowance</span><span class="o">.</span><span class="n">reduction_rate</span>
<span class="p">)</span>
<span class="n">taper</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">annual_allowance</span><span class="o">.</span><span class="n">taper</span>
<span class="n">annual_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Annual Allowance&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Default&quot;</span><span class="p">,</span> <span class="s2">&quot;Minimum&quot;</span><span class="p">,</span> <span class="s2">&quot;Reduction Rate&quot;</span><span class="p">,</span> <span class="s2">&quot;Taper&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">default</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">minimum</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">reduction_rate</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">taper</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">default</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">minimum</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">reduction_rate</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">taper</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">default</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">minimum</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">reduction_rate</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">taper</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">}</span>


<span class="nb">max</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">marriage_allowance</span><span class="o">.</span><span class="n">max</span>
<span class="n">rounding_increment</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">marriage_allowance</span><span class="o">.</span><span class="n">rounding_increment</span>
<span class="p">)</span>
<span class="n">takeup_rate</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">marriage_allowance</span><span class="o">.</span><span class="n">takeup_rate</span>
<span class="p">)</span>
<span class="n">marriage_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Marriage Allowance&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Max&quot;</span><span class="p">,</span> <span class="s2">&quot;Rounding Increment&quot;</span><span class="p">,</span> <span class="s2">&quot;Takeup Rate&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="nb">max</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">rounding_increment</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">takeup_rate</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="nb">max</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">rounding_increment</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">takeup_rate</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="nb">max</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">rounding_increment</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">takeup_rate</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">}</span>


<span class="n">deduction_rate</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">married_couples_allowance</span><span class="o">.</span><span class="n">deduction_rate</span>
<span class="p">)</span>
<span class="n">married_couples_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Married Couples Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Deduction Rate&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">deduction_rate</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">deduction_rate</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">deduction_rate</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]],</span>
<span class="p">}</span>


<span class="n">amount</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">personal_allowance</span><span class="o">.</span><span class="n">amount</span>
<span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">amount</span><span class="o">.</span><span class="n">values_list</span><span class="p">]</span>
<span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">instant_str</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">amount</span><span class="o">.</span><span class="n">values_list</span><span class="p">]</span>
<span class="n">personal_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Personal Allowance&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">),</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Amount&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">),</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="n">values</span><span class="p">,</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="n">dates</span><span class="p">,</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">amount</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">),</span>
<span class="p">}</span>


<span class="n">addtional_threshold</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">personal_savings_allowance</span><span class="o">.</span><span class="n">additional</span>
<span class="p">)</span>
<span class="n">basic_threshold</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">personal_savings_allowance</span><span class="o">.</span><span class="n">basic</span>
<span class="p">)</span>
<span class="n">higher_threshold</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">personal_savings_allowance</span><span class="o">.</span><span class="n">higher</span>
<span class="p">)</span>
<span class="n">personal_savings_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Personal Savings Allowance&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Addtional Threshold&quot;</span><span class="p">,</span> <span class="s2">&quot;Basic Threshold&quot;</span><span class="p">,</span> <span class="s2">&quot;Higher Threshold&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">addtional_threshold</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">basic_threshold</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">higher_threshold</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">addtional_threshold</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">basic_threshold</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
        <span class="n">higher_threshold</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">addtional_threshold</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">basic_threshold</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
        <span class="n">higher_threshold</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">}</span>


<span class="n">dividend_allowance</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">dividend_allowance</span>
<span class="p">)</span>
<span class="n">dividend_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Dividend Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Dividend Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">dividend_allowance</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">dividend_allowance</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">dividend_allowance</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]],</span>
<span class="p">}</span>


<span class="n">property_allowance</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">property_allowance</span>
<span class="p">)</span>
<span class="n">property_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Property Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Property Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">property_allowance</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">property_allowance</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">property_allowance</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]],</span>
<span class="p">}</span>


<span class="n">trading_allowance</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">system</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">hmrc</span><span class="o">.</span><span class="n">income_tax</span><span class="o">.</span><span class="n">allowances</span><span class="o">.</span><span class="n">trading_allowance</span>
<span class="p">)</span>
<span class="n">trading_allowance_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Attribute&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Trading Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Trading Allowance&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">trading_allowance</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
    <span class="s2">&quot;Effective Date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">trading_allowance</span><span class="o">.</span><span class="n">values_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">instant_str</span><span class="p">],</span>
    <span class="s2">&quot;Unit&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">trading_allowance</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]],</span>
<span class="p">}</span>

<span class="n">annual_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">annual_allowance_data</span><span class="p">)</span>
<span class="n">marriage_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">marriage_allowance_data</span><span class="p">)</span>
<span class="n">married_couples_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">married_couples_allowance_data</span><span class="p">)</span>
<span class="n">personal_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">personal_allowance_data</span><span class="p">)</span>
<span class="n">personal_savings_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">personal_savings_allowance_data</span><span class="p">)</span>
<span class="n">dividend_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dividend_allowance_data</span><span class="p">)</span>
<span class="n">property_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">property_allowance_data</span><span class="p">)</span>
<span class="n">trading_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">trading_allowance_data</span><span class="p">)</span>

<span class="n">income_tax_allowance_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">annual_allowance_df</span><span class="p">,</span>
        <span class="n">marriage_allowance_df</span><span class="p">,</span>
        <span class="n">married_couples_allowance_df</span><span class="p">,</span>
        <span class="n">personal_allowance_df</span><span class="p">,</span>
        <span class="n">personal_savings_allowance_df</span><span class="p">,</span>
        <span class="n">dividend_allowance_df</span><span class="p">,</span>
        <span class="n">property_allowance_df</span><span class="p">,</span>
        <span class="n">trading_allowance_df</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">income_tax_allowance_df</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Attribute</th>
      <th>Type</th>
      <th>Value</th>
      <th>Effective Date</th>
      <th>Unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Annual Allowance</td>
      <td>Default</td>
      <td>40000.0</td>
      <td>2015-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Annual Allowance</td>
      <td>Minimum</td>
      <td>4000.0</td>
      <td>2015-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Annual Allowance</td>
      <td>Reduction Rate</td>
      <td>0.5</td>
      <td>2015-04-01</td>
      <td>marginal-rate</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Annual Allowance</td>
      <td>Taper</td>
      <td>240000.0</td>
      <td>2015-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Marriage Allowance</td>
      <td>Max</td>
      <td>0.1</td>
      <td>2016-04-01</td>
      <td>/1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Marriage Allowance</td>
      <td>Rounding Increment</td>
      <td>10.0</td>
      <td>2016-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Marriage Allowance</td>
      <td>Takeup Rate</td>
      <td>1.0</td>
      <td>2000-01-01</td>
      <td>/1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Married Couples Allowance</td>
      <td>Deduction Rate</td>
      <td>0.1</td>
      <td>2010-01-01</td>
      <td>/1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Personal Allowance</td>
      <td>Amount</td>
      <td>12570.0</td>
      <td>2025-04-06</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Personal Allowance</td>
      <td>Amount</td>
      <td>12570.0</td>
      <td>2021-04-06</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Personal Allowance</td>
      <td>Amount</td>
      <td>12500.0</td>
      <td>2019-04-06</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Personal Allowance</td>
      <td>Amount</td>
      <td>11850.0</td>
      <td>2018-04-06</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Personal Allowance</td>
      <td>Amount</td>
      <td>11500.0</td>
      <td>2017-04-06</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Personal Allowance</td>
      <td>Amount</td>
      <td>10600.0</td>
      <td>2015-04-06</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Personal Savings Allowance</td>
      <td>Addtional Threshold</td>
      <td>0.0</td>
      <td>2005-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Personal Savings Allowance</td>
      <td>Basic Threshold</td>
      <td>1000.0</td>
      <td>2005-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Personal Savings Allowance</td>
      <td>Higher Threshold</td>
      <td>500.0</td>
      <td>2005-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Dividend Allowance</td>
      <td>Dividend Allowance</td>
      <td>2000.0</td>
      <td>2015-06-05</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Property Allowance</td>
      <td>Property Allowance</td>
      <td>1000.0</td>
      <td>2005-04-01</td>
      <td>currency-GBP</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Trading Allowance</td>
      <td>Trading Allowance</td>
      <td>1000.0</td>
      <td>2005-04-01</td>
      <td>currency-GBP</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Other income tax parameters can be found in policyengine-uk/policyengine_uk/parameters/gov/hmrc/income_tax.</p>
</section>
<section id="simulation">
<h2>Simulation<a class="headerlink" href="#simulation" title="Permalink to this heading">#</a></h2>
<p>The figure illustrates the implementation of a simulation for computing income tax and dividend income tax using PolicyEngine UK model. The simulation is conducted for an individual aged 30 with a fixed dividend income of £10,000 while varying the employment income between £0 and £200,000.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">policyengine_uk</span><span class="w"> </span><span class="kn">import</span> <span class="n">Simulation</span>

<span class="n">simulation</span> <span class="o">=</span> <span class="n">Simulation</span><span class="p">(</span>
    <span class="n">situation</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">people</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="n">person</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">age</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
                <span class="n">dividend_income</span><span class="o">=</span><span class="mi">10_000</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">),</span>
        <span class="n">axes</span><span class="o">=</span><span class="p">[</span>
            <span class="p">[</span>
                <span class="nb">dict</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;employment_income&quot;</span><span class="p">,</span>
                    <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="nb">max</span><span class="o">=</span><span class="mi">200_000</span><span class="p">,</span>
                    <span class="n">count</span><span class="o">=</span><span class="mi">1_000</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="p">],</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">plotly.express</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">px</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">policyengine_core.charts</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_fig</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;Employment income&quot;</span><span class="p">:</span> <span class="n">simulation</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="s2">&quot;employment_income&quot;</span><span class="p">),</span>
        <span class="s2">&quot;Income tax&quot;</span><span class="p">:</span> <span class="n">simulation</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="s2">&quot;income_tax&quot;</span><span class="p">),</span>
        <span class="s2">&quot;Dividend income tax&quot;</span><span class="p">:</span> <span class="n">simulation</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="s2">&quot;dividend_income_tax&quot;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Employment income&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Income tax&quot;</span><span class="p">,</span> <span class="s2">&quot;Dividend income tax&quot;</span><span class="p">],</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Income tax vs employment income&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;Income tax (£)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;Tax type&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>

<span class="n">format_fig</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./programs/gov/hmrc"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="fuel-duty.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Fuel duty</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="national-insurance.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">National Insurance</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Income Tax</a><ul>
<li><a class="reference internal" href="#legislation">Legislation</a></li>
<li><a class="reference internal" href="#methodology">Methodology:</a></li>
<li><a class="reference internal" href="#appendix">Appendix:</a></li>
<li><a class="reference internal" href="#simulation">Simulation</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>