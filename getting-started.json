{"version":2,"kind":"Article","sha256":"78d006c6f4d0c6ee707d1cf2684cd38cc76465f9879f7022392ed4522bb3c90e","slug":"getting-started","location":"/usage/getting-started.md","dependencies":[],"frontmatter":{"title":"Getting started","content_includes_title":false,"authors":[{"nameParsed":{"literal":"PolicyEngine","family":"PolicyEngine"},"name":"PolicyEngine","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/policyengine/policyengine-uk","copyright":"2024","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/policyengine/policyengine-uk/blob/master/docs/book/usage/getting-started.md","exports":[{"format":"md","filename":"getting-started.md","url":"/build/getting-started-c4526b3a1579468864e36e8be80c50dc.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"PolicyEngine UK helps you analyse the UK tax and benefit system in two main ways: simulating policies for specific households, or running large-scale microsimulation analyses. The first requires just a few minutes of setup, while the second needs access to survey data and takes a bit longer to configure.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oi67clps2m"}],"key":"u0FgzYDEMf"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"If possible, use Google Colab - it’s free and ensures everyone uses the same computing environment. The full microsimulation model needs just this snippet:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rm7lV86Uyt"}],"key":"Wq0c6EWmNL"},{"type":"code","lang":"python","value":"!export HUGGING_FACE_TOKEN=<your_token>\n!pip install policyengine-uk","position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"key":"sJj2CEz00N"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Installing PolicyEngine UK","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"oXQ5eJDBwB"}],"identifier":"installing-policyengine-uk","label":"Installing PolicyEngine UK","html_id":"installing-policyengine-uk","implicit":true,"key":"FsHtoAVEVl"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Install the package like any other Python library (requires Python ≥3.7):","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"euifU4qVpH"}],"key":"fnt5HKfKrg"},{"type":"code","lang":"bash","value":"pip install policyengine-uk","position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"key":"T4gAfWdWLZ"},{"type":"heading","depth":2,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Your first household simulation","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"NgD65hKBaZ"}],"identifier":"your-first-household-simulation","label":"Your first household simulation","html_id":"your-first-household-simulation","implicit":true,"key":"A1xbWFef3h"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Let’s start with a simple example: calculating how much income tax a 30-year-old earning £30,000 would pay.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"m9Q3sgOEnW"}],"key":"ng5XCGTOxW"},{"type":"code","lang":"python","value":"from policyengine_uk import Simulation\n\n# Define the household situation\nsituation = {\n    \"people\": {\n        \"person\": {\n            \"age\": {2025: 30},\n            \"employment_income\": {2025: 30_000},\n        },\n    },\n    \"benunits\": {\n        \"benunit\": {\n            \"members\": [\"person\"],\n        },\n    },\n    \"households\": {\n        \"household\": {\n            \"members\": [\"person\"],\n        }\n    },\n}\n\n# Create and run the simulation\nsimulation = Simulation(situation=situation)\nincome_tax = simulation.calculate(\"income_tax\", 2025)\nprint(f\"Income tax: £{income_tax[0]:.2f}\")","position":{"start":{"line":24,"column":1},"end":{"line":51,"column":1}},"key":"xOXuKNHOWg"},{"type":"paragraph","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"This gives us £3,486 in income tax. The structure might look complex at first, but it reflects how the UK tax system works - people belong to benefit units (families for benefit purposes) and households (for housing costs and council tax).","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"jZJS5nDsq0"}],"key":"p032kgyq7R"},{"type":"heading","depth":2,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"Analysing a policy reform","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"vKHt1UfKrl"}],"identifier":"analysing-a-policy-reform","label":"Analysing a policy reform","html_id":"analysing-a-policy-reform","implicit":true,"key":"JDkYhaKHX1"},{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"Now let’s see what happens if we increase the basic rate of income tax from 20% to 25%:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"FCCU23f8jg"}],"key":"J3759UbvUm"},{"type":"code","lang":"python","value":"# Define the policy reform\nincrease_basic_rate = {\"gov.hmrc.income_tax.rates.uk[0].rate\": 0.25}\n\n# Compare baseline and reformed systems\nbaseline = Simulation(situation=situation)\nreformed = Simulation(situation=situation, reform=increase_basic_rate)\n\nbaseline_tax = baseline.calculate(\"income_tax\", 2025)[0]\nreformed_tax = reformed.calculate(\"income_tax\", 2025)[0]\n\nincrease = reformed_tax - baseline_tax\nprint(f\"Tax increase: £{increase:.2f}\")","position":{"start":{"line":59,"column":1},"end":{"line":72,"column":1}},"key":"PtQ6wHOSpe"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"The reform increases this person’s tax by £871.50 per year. Policy parameters use a hierarchical structure - here we’re changing the first UK income tax rate (","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"i5EuzT5YHB"},{"type":"inlineCode","value":"uk[0].rate","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"JUVcCjCm7c"},{"type":"text","value":"), which is the basic rate.","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"rkSGvf1J6j"}],"key":"UsEO3aOG1A"},{"type":"heading","depth":2,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"text","value":"Running microsimulation analyses","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"Doa446TOHh"}],"identifier":"running-microsimulation-analyses","label":"Running microsimulation analyses","html_id":"running-microsimulation-analyses","implicit":true,"key":"Ez1EHRDvto"},{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"To analyse policies across the entire population, you’ll need survey data. PolicyEngine provides processed datasets via HuggingFace, but you’ll need an account and access token:","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"dgUagTj0L1"}],"key":"QbVRKrar56"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":80,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"Create a ","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"wAeLThDvHw"},{"type":"link","url":"https://huggingface.co","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"HuggingFace account","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"FPF17cMUTB"}],"urlSource":"https://huggingface.co","key":"EoqExzn2DB"}],"key":"Ty4C62eC4F"},{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Generate a personal access token in your settings","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"mCaP7Cyo7h"}],"key":"kJGouyPmZo"},{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"text","value":"Set it as an environment variable:","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"CPbEFK8NlC"}],"key":"VH2Q84uriJ"}],"key":"em9VAns1Re"},{"type":"code","lang":"bash","value":"export HUGGING_FACE_TOKEN=your_token_here","position":{"start":{"line":84,"column":1},"end":{"line":86,"column":1}},"key":"kgQIPwHwNb"},{"type":"heading","depth":3,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"Your first population analysis","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"MnON4WD5fT"}],"identifier":"your-first-population-analysis","label":"Your first population analysis","html_id":"your-first-population-analysis","implicit":true,"key":"H37CkXJjrF"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"Here’s how to calculate total Universal Credit spending across the UK:","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"JdHpjEbb3O"}],"key":"GeMRE0Eeht"},{"type":"code","lang":"python","value":"from policyengine_uk import Microsimulation\n\n# Load the enhanced Family Resources Survey data\nsim = Microsimulation(\n    dataset=\"hf://policyengine/policyengine-uk-data/enhanced_frs_2022_23.h5\"\n)\n\n# Calculate total UC spending (in billions)\ntotal_uc = sim.calculate(\"universal_credit\", 2025).sum() / 1e9\nprint(f\"Total Universal Credit spending: £{total_uc:.1f}bn\")","position":{"start":{"line":92,"column":1},"end":{"line":103,"column":1}},"key":"lEFFlg6ZVo"},{"type":"paragraph","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"This shows approximately £79.4bn in Universal Credit spending.","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"Iy19mYcNJC"}],"key":"qRCnvtTWC3"},{"type":"heading","depth":3,"position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"Estimating revenue from reforms","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"CA0ppyH1lb"}],"identifier":"estimating-revenue-from-reforms","label":"Estimating revenue from reforms","html_id":"estimating-revenue-from-reforms","implicit":true,"key":"WJo3JIAzBe"},{"type":"paragraph","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"text","value":"Let’s apply the same basic rate increase to the entire population:","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"NQ65DnzgBd"}],"key":"wXHwk4qj6P"},{"type":"code","lang":"python","value":"# Set up baseline and reformed simulations\nDATASET = \"hf://policyengine/policyengine-uk-data/enhanced_frs_2022_23.h5\"\n\nbaseline = Microsimulation(dataset=DATASET)\nreformed = Microsimulation(dataset=DATASET, reform=increase_basic_rate)\n\n# Calculate the revenue impact\nbaseline_income = baseline.calculate(\"household_net_income\", 2025)\nreformed_income = reformed.calculate(\"household_net_income\", 2025)\n\nrevenue = -(reformed_income - baseline_income).sum() / 1e9\nprint(f\"Additional revenue: £{revenue:.1f}bn per year\")","position":{"start":{"line":111,"column":1},"end":{"line":124,"column":1}},"key":"Yxv8AzLstU"},{"type":"paragraph","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"The reform would raise approximately £35.5bn annually.","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"UR8mxnZBJl"}],"key":"YFELYGi3b9"},{"type":"heading","depth":2,"position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"Working with complex households","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"VnvxQJ3xF3"}],"identifier":"working-with-complex-households","label":"Working with complex households","html_id":"working-with-complex-households","implicit":true,"key":"PsguNUzY31"},{"type":"paragraph","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"text","value":"Real households often have multiple people, children, and various income sources. Here’s a family with two adults and two children:","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"oYGGFgo8cw"}],"key":"aauuIv0lCT"},{"type":"code","lang":"python","value":"family_situation = {\n    \"people\": {\n        \"parent_1\": {\n            \"age\": {2025: 35},\n            \"employment_income\": {2025: 25_000},\n        },\n        \"parent_2\": {\n            \"age\": {2025: 33},\n            \"employment_income\": {2025: 15_000},\n        },\n        \"child_1\": {\n            \"age\": {2025: 8},\n        },\n        \"child_2\": {\n            \"age\": {2025: 5},\n        },\n    },\n    \"benunits\": {\n        \"family\": {\n            \"members\": [\"parent_1\", \"parent_2\", \"child_1\", \"child_2\"],\n        },\n    },\n    \"households\": {\n        \"home\": {\n            \"members\": [\"parent_1\", \"parent_2\", \"child_1\", \"child_2\"],\n            \"housing_costs\": {2025: 9600},  # Annual rent\n        }\n    },\n}\n\nfamily_sim = Simulation(situation=family_situation)\n\n# Calculate various benefits and taxes\nchild_benefit = family_sim.calculate(\"child_benefit\", 2025)[0]\nuniversal_credit = family_sim.calculate(\"universal_credit\", 2025)[0]\ntotal_tax = family_sim.calculate(\"income_tax\", 2025).sum()\n\nprint(f\"Child benefit: £{child_benefit:.2f}\")\nprint(f\"Universal Credit: £{universal_credit:.2f}\")\nprint(f\"Total income tax: £{total_tax:.2f}\")","position":{"start":{"line":132,"column":1},"end":{"line":173,"column":1}},"key":"X7mfmYyRAR"},{"type":"heading","depth":2,"position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"children":[{"type":"text","value":"Next steps","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"CbbclD0E8Y"}],"identifier":"next-steps","label":"Next steps","html_id":"next-steps","implicit":true,"key":"g2kvYr5WaP"},{"type":"paragraph","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"You’re now ready to explore PolicyEngine UK further. The ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"OuUWfIN6HF"},{"type":"link","url":"https://policyengine.org","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"PolicyEngine web app","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"PnuGBphZQV"}],"urlSource":"https://policyengine.org","key":"alpV7Nnaa3"},{"type":"text","value":" includes a ‘Reproduce in Python’ section at the bottom of each page, which generates code snippets for any household or reform you create there.","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"MuiPaSs7C2"}],"key":"lE9nt8KMyY"},{"type":"paragraph","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"text","value":"For more detailed guidance, see:","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"JHYDKcPZCK"}],"key":"pArDhZvPuc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":180,"column":1},"end":{"line":181,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"link","url":"/simulations","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"text","value":"Simulations","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"WT88mHYAwl"}],"urlSource":"simulations.md","dataUrl":"/simulations.json","internal":true,"protocol":"file","key":"fNu3BYQzEO"},{"type":"text","value":" - comprehensive guide to running simulations","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"D8NdogzKJo"}],"key":"N20yCzYHeb"},{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"children":[{"type":"link","url":"/scenarios","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"children":[{"type":"text","value":"Scenarios","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"oRDR2CLH13"}],"urlSource":"scenarios.md","dataUrl":"/scenarios.json","internal":true,"protocol":"file","key":"vBS5kuKTtU"},{"type":"text","value":" - creating and combining policy reforms","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"xA658GYHr8"}],"key":"RKBvKRP9cV"}],"key":"SDQT8WhULk"}],"key":"fCpz5scIRN"}],"key":"wyigYp6qtk"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"PolicyEngine UK documentation","url":"/","group":"PolicyEngine UK documentation"},"next":{"title":"Running simulations","url":"/simulations","group":"Usage"}}},"domain":"http://localhost:3000"}