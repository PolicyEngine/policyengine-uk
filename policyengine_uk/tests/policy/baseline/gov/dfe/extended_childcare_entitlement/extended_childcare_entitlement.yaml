- name: Eligible for 30 hours - All conditions met
  period: 2025
  absolute_error_margin: 3
  input:
    people:
      child1:
        age: 3  # Age 3+ gets 30 hours
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 6872.805

- name: Eligible for 15 hours - 2 year old (evaluated at Jan 1, 2025 before Sept expansion)
  period: 2025
  absolute_error_margin: 3
  input:
    people:
      child1:
        age: 2  # Age 2 gets 15 hours when evaluated at Jan 1, 2025
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 4839.016

- name: Not eligible (one condition not met)
  period: 2025
  absolute_error_margin: 1
  input:
    people:
      child1:
        age: 2
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: false
  output:
    extended_childcare_entitlement: 0  # Not eligible

- name: Eligible for mixed hours - Family with multiple children
  period: 2025
  absolute_error_margin: 6
  input:
    people:
      child1:
        age: 2  # 15 hours at Jan 1, 2025
      child2:
        age: 3  # 30 hours
    benunits:
      benunit1:
        members: [child1, child2]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 11711.821

- name: Not eligible - Family with multiple children but conditions not met
  period: 2025
  absolute_error_margin: 1
  input:
    people:
      child1:
        age: 2
      child2:
        age: 3
    benunits:
      benunit1:
        members: [child1, child2]
        extended_childcare_entitlement_eligible: false
  output:
    extended_childcare_entitlement: 0  # Not eligible

- name: Eligible with one working parent and one disabled parent
  period: 2025
  absolute_error_margin: 9
  input:
    people:
      child1:
        age: 2  # 15 hours at Jan 1, 2025
      child2:
        age: 3  # 30 hours
      child3:
        age: 3  # 30 hours
    benunits:
      benunit1:
        members: [child1, child2, child3]
        family_type: COUPLE_WITH_CHILDREN
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 18584.626

- name: No expenses for zero hours
  period: 2025
  absolute_error_margin: 1
  input:
    people:
      child1:
        age: 3
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: false
  output:
    extended_childcare_entitlement: 0  # Not eligible

- name: Child using fewer hours than maximum entitlement
  period: 2025
  absolute_error_margin: 2
  input:
    people:
      child1:
        age: 3
        max_free_entitlement_hours_used: 20
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 4581.87  # 20 hours * 38 weeks * Â£6.07 per hour (2025 rate)

- name: Child using fewer hours than maximum entitlement - multiple children
  period: 2025
  absolute_error_margin: 2
  input:
    people:
      child1:
        age: 2  # Can get 15 hours at Jan 1, 2025, but only using 10
        max_free_entitlement_hours_used: 10
      child2:
        age: 3
        max_free_entitlement_hours_used: 15
    benunits:
      benunit1:
        members: [child1, child2]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 6662.413

- name: Benefit unit maximum hours cap applied
  period: 2025
  absolute_error_margin: 5
  input:
    people:
      child1:
        age: 3
        max_free_entitlement_hours_used: 30
      child2:
        age: 3
        max_free_entitlement_hours_used: 30
    benunits:
      benunit1:
        members: [child1, child2]
        extended_childcare_entitlement_eligible: true
        maximum_extended_childcare_hours_usage: 40 
  output:
    extended_childcare_entitlement: 13745.609


- name: Benefit unit without maximum hours cap applied
  period: 2025
  absolute_error_margin: 1
  input:
    people:
      child1:
        age: 3
        max_free_entitlement_hours_used: 30
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: true
        maximum_extended_childcare_hours_usage: 10 
  output:
    extended_childcare_entitlement: 2290.935


- name: Benefit unit without maximum hours cap applied with 3 years old child
  period: 2025
  absolute_error_margin: 2
  input:
    people:
      child1:
        age: 3
        max_free_entitlement_hours_used: 15
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: true
        maximum_extended_childcare_hours_usage: 18
  output:
    extended_childcare_entitlement: 3436.402

- name: Eligible for 30 hours - 2 year old after September 2025 expansion
  period: 2026
  absolute_error_margin: 3
  input:
    people:
      child1:
        age: 2  # Age 2 gets 30 hours from September 2025 onwards
    benunits:
      benunit1:
        members: [child1]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 9678.032

- name: Eligible for 30 hours - Family with multiple 2-year-olds after expansion
  period: 2026
  absolute_error_margin: 6
  input:
    people:
      child1:
        age: 2  # 30 hours after September 2025
      child2:
        age: 3  # 30 hours
    benunits:
      benunit1:
        members: [child1, child2]
        extended_childcare_entitlement_eligible: true
  output:
    extended_childcare_entitlement: 16356.064