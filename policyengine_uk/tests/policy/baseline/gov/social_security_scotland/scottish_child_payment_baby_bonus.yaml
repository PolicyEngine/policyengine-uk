# Tests for Scottish Child Payment Premium for under-ones
#
# POLICY: Children under 1 receive FIXED £40/week TOTAL payment (from April 2027)
#         Children 1+ receive standard SCP rate (£27.15 in 2025+)
#
# Source: Scottish Budget 2026-27 announced for 2027-28
# https://www.gov.scot/publications/scottish-budget-2026-2027/pages/6/
# "will be paid in 2027-28"
#
# This is NOT a fixed bonus - it's a fixed total amount.
#
# Calculations (using current confirmed rate £27.15):
# - Standard SCP: £27.15/week * 52 = £1,411.80/year
# - Premium for under-1s: £40/week * 52 = £2,080/year (TOTAL, not base + bonus)

# Test 1: Scottish family with 1 baby (age 0) - 2025
- name: Scottish family with 1 baby - 2025
  period: 2025
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      baby:
        age: 0
    benunits:
      family:
        members:
          - parent
          - baby
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - baby
        region: SCOTLAND
  output:
    # 1 child * £27.15/week * 52 weeks = £1,411.80
    scottish_child_payment: 1412

# Test 2: Scottish family with 1 baby (age 0) - 2026 (no baby boost yet)
- name: Scottish family with 1 baby - 2026 no baby boost
  period: 2026
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      baby:
        age: 0
    benunits:
      family:
        members:
          - parent
          - baby
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - baby
        region: SCOTLAND
  output:
    # 1 baby * £27.15/week * 52 = £1,411.80/year (no baby boost until 2027)
    scottish_child_payment: 1412

# Test 3: Scottish family with 1 baby (age 0) - 2027 (WITH baby boost)
- name: Scottish family with 1 baby - 2027 with baby boost
  period: 2027
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      baby:
        age: 0
    benunits:
      family:
        members:
          - parent
          - baby
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - baby
        region: SCOTLAND
  output:
    # 1 baby * £40/week * 52 = £2,080/year (TOTAL payment for under-1)
    scottish_child_payment: 2080

# Test 4: Scottish family with 2 babies (both age 0) - 2027
- name: Scottish family with 2 babies - 2027 with baby boost
  period: 2027
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      baby1:
        age: 0
      baby2:
        age: 0
    benunits:
      family:
        members:
          - parent
          - baby1
          - baby2
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - baby1
          - baby2
        region: SCOTLAND
  output:
    # 2 babies * £40/week * 52 = £4,160/year
    scottish_child_payment: 4160

# Test 5: Scottish family with 1 baby and 1 older child - 2027
- name: Scottish family with 1 baby and 1 older child - 2027
  period: 2027
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      baby:
        age: 0
      older_child:
        age: 5
    benunits:
      family:
        members:
          - parent
          - baby
          - older_child
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - baby
          - older_child
        region: SCOTLAND
  output:
    # 1 baby @ £40/week + 1 older child @ £27.15/week = £67.15/week
    # £67.15 * 52 = £3,491.80/year
    scottish_child_payment: 3492

# Test 6: Scottish family with only older children (no babies) - 2026
- name: Scottish family with older children only - 2026
  period: 2026
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      child1:
        age: 3
      child2:
        age: 7
    benunits:
      family:
        members:
          - parent
          - child1
          - child2
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - child1
          - child2
        region: SCOTLAND
  output:
    # 2 older children @ £27.15/week * 52 = £2,823.60 (standard rate)
    scottish_child_payment: 2824

# Test 7: English family with baby - no SCP (not in Scotland)
- name: English family with baby - no SCP
  period: 2027
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      baby:
        age: 0
    benunits:
      family:
        members:
          - parent
          - baby
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - baby
        region: NORTH_EAST
  output:
    scottish_child_payment: 0

# Test 8: Child at age boundary (exactly 1 year old) - no premium
- name: Scottish family with 1 year old child - no premium
  period: 2027
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
      child:
        age: 1
    benunits:
      family:
        members:
          - parent
          - child
        universal_credit: 5000
    households:
      household:
        members:
          - parent
          - child
        region: SCOTLAND
  output:
    # 1 child @ £27.15/week * 52 = £1,411.80 (standard rate - age >= 1)
    scottish_child_payment: 1412

# Test 9: High income - no qualifying benefit, no SCP
- name: Scottish family with £50k income - no SCP
  period: 2027
  absolute_error_margin: 1
  input:
    people:
      parent:
        age: 30
        employment_income: 50000
      baby:
        age: 0
    benunits:
      family:
        members:
          - parent
          - baby
    households:
      household:
        members:
          - parent
          - baby
        region: SCOTLAND
  output:
    # No UC at £50k income, so no SCP eligibility
    scottish_child_payment: 0
